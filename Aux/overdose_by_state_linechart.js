var data = [{"name":"Alabama","values":[{"year":1999,"deaths":3.8},{"year":2000,"deaths":4.4},{"year":2001,"deaths":4.8},{"year":2002,"deaths":4.7},{"year":2003,"deaths":4.4},{"year":2004,"deaths":6.2},{"year":2005,"deaths":6.2},{"year":2006,"deaths":8.6},{"year":2007,"deaths":10.9},{"year":2008,"deaths":12.9},{"year":2009,"deaths":13.2},{"year":2010,"deaths":11.4},{"year":2011,"deaths":11.5},{"year":2012,"deaths":11.7},{"year":2013,"deaths":12.4},{"year":2014,"deaths":14.9},{"year":2015,"deaths":15.1},{"year":2016,"deaths":15.5}]},{"name":"Alaska","values":[{"year":1999,"deaths":7.4},{"year":2000,"deaths":7.7},{"year":2001,"deaths":9.8},{"year":2002,"deaths":13.1},{"year":2003,"deaths":12.8},{"year":2004,"deaths":13},{"year":2005,"deaths":11.8},{"year":2006,"deaths":11.3},{"year":2007,"deaths":10.6},{"year":2008,"deaths":18.5},{"year":2009,"deaths":18.7},{"year":2010,"deaths":11.7},{"year":2011,"deaths":14.8},{"year":2012,"deaths":17.6},{"year":2013,"deaths":14.3},{"year":2014,"deaths":16.8},{"year":2015,"deaths":16.5},{"year":2016,"deaths":17.3}]},{"name":"Arizona","values":[{"year":1999,"deaths":10.2},{"year":2000,"deaths":10.2},{"year":2001,"deaths":10.5},{"year":2002,"deaths":11.6},{"year":2003,"deaths":12.2},{"year":2004,"deaths":13.2},{"year":2005,"deaths":13.6},{"year":2006,"deaths":14.5},{"year":2007,"deaths":15.3},{"year":2008,"deaths":13.2},{"year":2009,"deaths":15.8},{"year":2010,"deaths":17.2},{"year":2011,"deaths":16.5},{"year":2012,"deaths":17.3},{"year":2013,"deaths":18.4},{"year":2014,"deaths":18},{"year":2015,"deaths":18.7},{"year":2016,"deaths":19.9}]},{"name":"Arkansas","values":[{"year":1999,"deaths":4.3},{"year":2000,"deaths":5.2},{"year":2001,"deaths":4.7},{"year":2002,"deaths":6.5},{"year":2003,"deaths":6.8},{"year":2004,"deaths":8.4},{"year":2005,"deaths":9.7},{"year":2006,"deaths":10.1},{"year":2007,"deaths":10.6},{"year":2008,"deaths":12.5},{"year":2009,"deaths":12.1},{"year":2010,"deaths":12},{"year":2011,"deaths":12.1},{"year":2012,"deaths":12.6},{"year":2013,"deaths":10.8},{"year":2014,"deaths":12},{"year":2015,"deaths":13.2},{"year":2016,"deaths":13.4}]},{"name":"California","values":[{"year":1999,"deaths":7.9},{"year":2000,"deaths":5.7},{"year":2001,"deaths":3.6},{"year":2002,"deaths":8.5},{"year":2003,"deaths":8.8},{"year":2004,"deaths":8.8},{"year":2005,"deaths":9},{"year":2006,"deaths":9.7},{"year":2007,"deaths":10.6},{"year":2008,"deaths":10.6},{"year":2009,"deaths":11},{"year":2010,"deaths":10.9},{"year":2011,"deaths":11.1},{"year":2012,"deaths":10.6},{"year":2013,"deaths":11.6},{"year":2014,"deaths":11.7},{"year":2015,"deaths":11.9},{"year":2016,"deaths":11.9}]},{"name":"Colorado","values":[{"year":1999,"deaths":8.3},{"year":2000,"deaths":8.2},{"year":2001,"deaths":9.3},{"year":2002,"deaths":10},{"year":2003,"deaths":11.1},{"year":2004,"deaths":11.3},{"year":2005,"deaths":13.1},{"year":2006,"deaths":13.3},{"year":2007,"deaths":15.3},{"year":2008,"deaths":15.3},{"year":2009,"deaths":15.5},{"year":2010,"deaths":13},{"year":2011,"deaths":16.5},{"year":2012,"deaths":15.6},{"year":2013,"deaths":16.1},{"year":2014,"deaths":16.8},{"year":2015,"deaths":15.9},{"year":2016,"deaths":17}]},{"name":"Connecticut","values":[{"year":1999,"deaths":9.2},{"year":2000,"deaths":9.4},{"year":2001,"deaths":8.9},{"year":2002,"deaths":10.2},{"year":2003,"deaths":8.8},{"year":2004,"deaths":9.5},{"year":2005,"deaths":8.4},{"year":2006,"deaths":11.6},{"year":2007,"deaths":12.3},{"year":2008,"deaths":10.9},{"year":2009,"deaths":11},{"year":2010,"deaths":10.2},{"year":2011,"deaths":11.2},{"year":2012,"deaths":12.2},{"year":2013,"deaths":16.2},{"year":2014,"deaths":17.3},{"year":2015,"deaths":22.3},{"year":2016,"deaths":27.1}]},{"name":"Delaware","values":[{"year":1999,"deaths":6.5},{"year":2000,"deaths":7},{"year":2001,"deaths":8},{"year":2002,"deaths":10.4},{"year":2003,"deaths":9.4},{"year":2004,"deaths":7.6},{"year":2005,"deaths":7.3},{"year":2006,"deaths":9.1},{"year":2007,"deaths":11.1},{"year":2008,"deaths":14},{"year":2009,"deaths":15.3},{"year":2010,"deaths":16.1},{"year":2011,"deaths":17.6},{"year":2012,"deaths":15.4},{"year":2013,"deaths":17.9},{"year":2014,"deaths":20.2},{"year":2015,"deaths":20.9},{"year":2016,"deaths":29.6}]},{"name":"District of Columbia","values":[{"year":1999,"deaths":8.4},{"year":2000,"deaths":13.3},{"year":2001,"deaths":16.2},{"year":2002,"deaths":10.6},{"year":2003,"deaths":18.1},{"year":2004,"deaths":15.3},{"year":2005,"deaths":13.6},{"year":2006,"deaths":17.7},{"year":2007,"deaths":10.6},{"year":2008,"deaths":9.7},{"year":2009,"deaths":4.4},{"year":2010,"deaths":13},{"year":2011,"deaths":13.9},{"year":2012,"deaths":12.2},{"year":2013,"deaths":15.8},{"year":2014,"deaths":14.6},{"year":2015,"deaths":18.6},{"year":2016,"deaths":39.5}]},{"name":"Florida","values":[{"year":1999,"deaths":6.3},{"year":2000,"deaths":7.3},{"year":2001,"deaths":10.7},{"year":2002,"deaths":11.5},{"year":2003,"deaths":12.1},{"year":2004,"deaths":13},{"year":2005,"deaths":13.3},{"year":2006,"deaths":14.3},{"year":2007,"deaths":15.2},{"year":2008,"deaths":16},{"year":2009,"deaths":16.6},{"year":2010,"deaths":16.3},{"year":2011,"deaths":15.3},{"year":2012,"deaths":13.4},{"year":2013,"deaths":12.7},{"year":2014,"deaths":13.2},{"year":2015,"deaths":15.9},{"year":2016,"deaths":22.9}]},{"name":"Georgia","values":[{"year":1999,"deaths":3.5},{"year":2000,"deaths":4.4},{"year":2001,"deaths":6.1},{"year":2002,"deaths":6.6},{"year":2003,"deaths":7},{"year":2004,"deaths":7.6},{"year":2005,"deaths":8.3},{"year":2006,"deaths":9.1},{"year":2007,"deaths":9.9},{"year":2008,"deaths":9.8},{"year":2009,"deaths":10.5},{"year":2010,"deaths":10.9},{"year":2011,"deaths":10.8},{"year":2012,"deaths":10.6},{"year":2013,"deaths":11},{"year":2014,"deaths":11.9},{"year":2015,"deaths":12.7},{"year":2016,"deaths":13.5}]},{"name":"Hawaii","values":[{"year":1999,"deaths":6.6},{"year":2000,"deaths":5.2},{"year":2001,"deaths":6.3},{"year":2002,"deaths":6.2},{"year":2003,"deaths":7.4},{"year":2004,"deaths":8.1},{"year":2005,"deaths":9.7},{"year":2006,"deaths":6.6},{"year":2007,"deaths":10.3},{"year":2008,"deaths":9.2},{"year":2009,"deaths":10.1},{"year":2010,"deaths":11.1},{"year":2011,"deaths":13.1},{"year":2012,"deaths":11.1},{"year":2013,"deaths":11.3},{"year":2014,"deaths":11.1},{"year":2015,"deaths":11.8},{"year":2016,"deaths":13.4}]},{"name":"Idaho","values":[{"year":1999,"deaths":5},{"year":2000,"deaths":4.9},{"year":2001,"deaths":7.4},{"year":2002,"deaths":8.7},{"year":2003,"deaths":7.5},{"year":2004,"deaths":7},{"year":2005,"deaths":7.6},{"year":2006,"deaths":8.9},{"year":2007,"deaths":8.4},{"year":2008,"deaths":9.5},{"year":2009,"deaths":11},{"year":2010,"deaths":11.4},{"year":2011,"deaths":12.2},{"year":2012,"deaths":11.3},{"year":2013,"deaths":12.8},{"year":2014,"deaths":13},{"year":2015,"deaths":13.2},{"year":2016,"deaths":14.4}]},{"name":"Illinois","values":[{"year":1999,"deaths":6.7},{"year":2000,"deaths":7},{"year":2001,"deaths":7.1},{"year":2002,"deaths":7.9},{"year":2003,"deaths":6.7},{"year":2004,"deaths":8.2},{"year":2005,"deaths":8.5},{"year":2006,"deaths":10.8},{"year":2007,"deaths":9.4},{"year":2008,"deaths":10.6},{"year":2009,"deaths":10.8},{"year":2010,"deaths":10},{"year":2011,"deaths":10.9},{"year":2012,"deaths":12.6},{"year":2013,"deaths":12.3},{"year":2014,"deaths":13.2},{"year":2015,"deaths":14.3},{"year":2016,"deaths":18.8}]},{"name":"Indiana","values":[{"year":1999,"deaths":3.2},{"year":2000,"deaths":3.5},{"year":2001,"deaths":4.6},{"year":2002,"deaths":4.8},{"year":2003,"deaths":7},{"year":2004,"deaths":8.7},{"year":2005,"deaths":9.7},{"year":2006,"deaths":11.6},{"year":2007,"deaths":12.2},{"year":2008,"deaths":12.9},{"year":2009,"deaths":13.9},{"year":2010,"deaths":14.3},{"year":2011,"deaths":15},{"year":2012,"deaths":15.5},{"year":2013,"deaths":16.2},{"year":2014,"deaths":17.8},{"year":2015,"deaths":18.8},{"year":2016,"deaths":23}]},{"name":"Iowa","values":[{"year":1999,"deaths":1.8},{"year":2000,"deaths":2.5},{"year":2001,"deaths":3},{"year":2002,"deaths":3.1},{"year":2003,"deaths":3.3},{"year":2004,"deaths":4.1},{"year":2005,"deaths":4.8},{"year":2006,"deaths":6.3},{"year":2007,"deaths":6.8},{"year":2008,"deaths":6.9},{"year":2009,"deaths":6.8},{"year":2010,"deaths":8.3},{"year":2011,"deaths":8.2},{"year":2012,"deaths":8.4},{"year":2013,"deaths":8.9},{"year":2014,"deaths":8.5},{"year":2015,"deaths":9.9},{"year":2016,"deaths":10}]},{"name":"Kansas","values":[{"year":1999,"deaths":3.3},{"year":2000,"deaths":3.8},{"year":2001,"deaths":5.1},{"year":2002,"deaths":6.3},{"year":2003,"deaths":6.9},{"year":2004,"deaths":8.2},{"year":2005,"deaths":8.8},{"year":2006,"deaths":9.3},{"year":2007,"deaths":9.7},{"year":2008,"deaths":7.8},{"year":2009,"deaths":10.7},{"year":2010,"deaths":9.4},{"year":2011,"deaths":9.8},{"year":2012,"deaths":11},{"year":2013,"deaths":11.4},{"year":2014,"deaths":11.4},{"year":2015,"deaths":11.3},{"year":2016,"deaths":10.8}]},{"name":"Kentucky","values":[{"year":1999,"deaths":4.9},{"year":2000,"deaths":6},{"year":2001,"deaths":8.5},{"year":2002,"deaths":10.4},{"year":2003,"deaths":13.6},{"year":2004,"deaths":12.7},{"year":2005,"deaths":15.3},{"year":2006,"deaths":17.3},{"year":2007,"deaths":16.6},{"year":2008,"deaths":17.8},{"year":2009,"deaths":17.8},{"year":2010,"deaths":23.2},{"year":2011,"deaths":24.2},{"year":2012,"deaths":24.6},{"year":2013,"deaths":23.2},{"year":2014,"deaths":24.4},{"year":2015,"deaths":28.8},{"year":2016,"deaths":32}]},{"name":"Louisiana","values":[{"year":1999,"deaths":4.2},{"year":2000,"deaths":5.5},{"year":2001,"deaths":5.9},{"year":2002,"deaths":8.1},{"year":2003,"deaths":11.9},{"year":2004,"deaths":11.8},{"year":2005,"deaths":14.4},{"year":2006,"deaths":16.4},{"year":2007,"deaths":18.5},{"year":2008,"deaths":14.6},{"year":2009,"deaths":13},{"year":2010,"deaths":13},{"year":2011,"deaths":13.1},{"year":2012,"deaths":12.3},{"year":2013,"deaths":17.5},{"year":2014,"deaths":16.7},{"year":2015,"deaths":18.4},{"year":2016,"deaths":21.3}]},{"name":"Maine","values":[{"year":1999,"deaths":5.3},{"year":2000,"deaths":4.8},{"year":2001,"deaths":6.6},{"year":2002,"deaths":10.7},{"year":2003,"deaths":10.2},{"year":2004,"deaths":10.7},{"year":2005,"deaths":12.4},{"year":2006,"deaths":12},{"year":2007,"deaths":12},{"year":2008,"deaths":12.2},{"year":2009,"deaths":13},{"year":2010,"deaths":10.2},{"year":2011,"deaths":11.7},{"year":2012,"deaths":11.3},{"year":2013,"deaths":13.1},{"year":2014,"deaths":16.2},{"year":2015,"deaths":20.2},{"year":2016,"deaths":26.5}]},{"name":"Maryland","values":[{"year":1999,"deaths":12},{"year":2000,"deaths":11.8},{"year":2001,"deaths":11.9},{"year":2002,"deaths":13.3},{"year":2003,"deaths":14.2},{"year":2004,"deaths":12.2},{"year":2005,"deaths":11.7},{"year":2006,"deaths":13.5},{"year":2007,"deaths":13.6},{"year":2008,"deaths":12.2},{"year":2009,"deaths":13},{"year":2010,"deaths":11.3},{"year":2011,"deaths":12.1},{"year":2012,"deaths":14.1},{"year":2013,"deaths":15},{"year":2014,"deaths":17.9},{"year":2015,"deaths":21.4},{"year":2016,"deaths":34}]},{"name":"Massachusetts","values":[{"year":1999,"deaths":7.7},{"year":2000,"deaths":7.3},{"year":2001,"deaths":10.8},{"year":2002,"deaths":11},{"year":2003,"deaths":12.8},{"year":2004,"deaths":10.4},{"year":2005,"deaths":12.2},{"year":2006,"deaths":15.1},{"year":2007,"deaths":14.3},{"year":2008,"deaths":12.2},{"year":2009,"deaths":12.5},{"year":2010,"deaths":11.3},{"year":2011,"deaths":13},{"year":2012,"deaths":12.9},{"year":2013,"deaths":16.2},{"year":2014,"deaths":19.1},{"year":2015,"deaths":25.4},{"year":2016,"deaths":32.7}]},{"name":"Michigan","values":[{"year":1999,"deaths":4.6},{"year":2000,"deaths":5.6},{"year":2001,"deaths":6.2},{"year":2002,"deaths":7.5},{"year":2003,"deaths":7.6},{"year":2004,"deaths":8.6},{"year":2005,"deaths":9.8},{"year":2006,"deaths":11.7},{"year":2007,"deaths":12.4},{"year":2008,"deaths":12.5},{"year":2009,"deaths":14.4},{"year":2010,"deaths":14.1},{"year":2011,"deaths":14},{"year":2012,"deaths":13.2},{"year":2013,"deaths":15.7},{"year":2014,"deaths":17.8},{"year":2015,"deaths":20},{"year":2016,"deaths":23.6}]},{"name":"Minnesota","values":[{"year":1999,"deaths":2.8},{"year":2000,"deaths":2.6},{"year":2001,"deaths":3.7},{"year":2002,"deaths":4},{"year":2003,"deaths":4.9},{"year":2004,"deaths":4.9},{"year":2005,"deaths":5.5},{"year":2006,"deaths":6},{"year":2007,"deaths":6.5},{"year":2008,"deaths":7.3},{"year":2009,"deaths":7.9},{"year":2010,"deaths":7.5},{"year":2011,"deaths":9.6},{"year":2012,"deaths":9},{"year":2013,"deaths":9.6},{"year":2014,"deaths":9.5},{"year":2015,"deaths":10.6},{"year":2016,"deaths":12.2}]},{"name":"Mississippi","values":[{"year":1999,"deaths":3.1},{"year":2000,"deaths":4},{"year":2001,"deaths":5.9},{"year":2002,"deaths":6.4},{"year":2003,"deaths":7.2},{"year":2004,"deaths":7.8},{"year":2005,"deaths":8.5},{"year":2006,"deaths":11.7},{"year":2007,"deaths":10.7},{"year":2008,"deaths":10.3},{"year":2009,"deaths":10.9},{"year":2010,"deaths":11.3},{"year":2011,"deaths":10.1},{"year":2012,"deaths":10.4},{"year":2013,"deaths":10.6},{"year":2014,"deaths":11.2},{"year":2015,"deaths":11.7},{"year":2016,"deaths":11.8}]},{"name":"Missouri","values":[{"year":1999,"deaths":5},{"year":2000,"deaths":5.4},{"year":2001,"deaths":6.2},{"year":2002,"deaths":7.3},{"year":2003,"deaths":9.1},{"year":2004,"deaths":9.5},{"year":2005,"deaths":10.5},{"year":2006,"deaths":12.7},{"year":2007,"deaths":12.1},{"year":2008,"deaths":12.9},{"year":2009,"deaths":14.5},{"year":2010,"deaths":16.7},{"year":2011,"deaths":16},{"year":2012,"deaths":15.6},{"year":2013,"deaths":17},{"year":2014,"deaths":17.6},{"year":2015,"deaths":17.5},{"year":2016,"deaths":22.5}]},{"name":"Montana","values":[{"year":1999,"deaths":4.6},{"year":2000,"deaths":4.5},{"year":2001,"deaths":6.2},{"year":2002,"deaths":8.6},{"year":2003,"deaths":10.1},{"year":2004,"deaths":10.5},{"year":2005,"deaths":10.2},{"year":2006,"deaths":10.2},{"year":2007,"deaths":13},{"year":2008,"deaths":13.7},{"year":2009,"deaths":14.4},{"year":2010,"deaths":11.9},{"year":2011,"deaths":14.1},{"year":2012,"deaths":11.7},{"year":2013,"deaths":13.5},{"year":2014,"deaths":12.2},{"year":2015,"deaths":13.4},{"year":2016,"deaths":11.4}]},{"name":"Nebraska","values":[{"year":1999,"deaths":2.3},{"year":2000,"deaths":2.7},{"year":2001,"deaths":3.8},{"year":2002,"deaths":3.8},{"year":2003,"deaths":3.2},{"year":2004,"deaths":3.4},{"year":2005,"deaths":4.9},{"year":2006,"deaths":5.1},{"year":2007,"deaths":4.5},{"year":2008,"deaths":5.2},{"year":2009,"deaths":5.8},{"year":2010,"deaths":6.4},{"year":2011,"deaths":7},{"year":2012,"deaths":7.9},{"year":2013,"deaths":6.3},{"year":2014,"deaths":6.6},{"year":2015,"deaths":6.6},{"year":2016,"deaths":6.3}]},{"name":"Nevada","values":[{"year":1999,"deaths":11.7},{"year":2000,"deaths":13.7},{"year":2001,"deaths":12.4},{"year":2002,"deaths":14.9},{"year":2003,"deaths":15.2},{"year":2004,"deaths":16.2},{"year":2005,"deaths":18.8},{"year":2006,"deaths":18.3},{"year":2007,"deaths":19.2},{"year":2008,"deaths":19.6},{"year":2009,"deaths":20.5},{"year":2010,"deaths":21.4},{"year":2011,"deaths":23.5},{"year":2012,"deaths":21.8},{"year":2013,"deaths":22},{"year":2014,"deaths":19.2},{"year":2015,"deaths":21.4},{"year":2016,"deaths":22.6}]},{"name":"New Hampshire","values":[{"year":1999,"deaths":4.4},{"year":2000,"deaths":3.6},{"year":2001,"deaths":6.3},{"year":2002,"deaths":8.7},{"year":2003,"deaths":9.9},{"year":2004,"deaths":9.6},{"year":2005,"deaths":10.9},{"year":2006,"deaths":11.4},{"year":2007,"deaths":14.2},{"year":2008,"deaths":9.6},{"year":2009,"deaths":12.8},{"year":2010,"deaths":12.2},{"year":2011,"deaths":15.9},{"year":2012,"deaths":13.1},{"year":2013,"deaths":15.3},{"year":2014,"deaths":25.2},{"year":2015,"deaths":31.7},{"year":2016,"deaths":36}]},{"name":"New Jersey","values":[{"year":1999,"deaths":6.7},{"year":2000,"deaths":7.6},{"year":2001,"deaths":8.3},{"year":2002,"deaths":9.5},{"year":2003,"deaths":8.4},{"year":2004,"deaths":6.8},{"year":2005,"deaths":9.5},{"year":2006,"deaths":9.8},{"year":2007,"deaths":8.4},{"year":2008,"deaths":8.1},{"year":2009,"deaths":3},{"year":2010,"deaths":9.9},{"year":2011,"deaths":11.5},{"year":2012,"deaths":13.8},{"year":2013,"deaths":14.5},{"year":2014,"deaths":14},{"year":2015,"deaths":16.2},{"year":2016,"deaths":23}]},{"name":"New Mexico","values":[{"year":1999,"deaths":14.7},{"year":2000,"deaths":14.9},{"year":2001,"deaths":14.1},{"year":2002,"deaths":15.5},{"year":2003,"deaths":19.1},{"year":2004,"deaths":16.5},{"year":2005,"deaths":19.3},{"year":2006,"deaths":21.3},{"year":2007,"deaths":23.2},{"year":2008,"deaths":25.8},{"year":2009,"deaths":21.5},{"year":2010,"deaths":23.2},{"year":2011,"deaths":25.4},{"year":2012,"deaths":23.6},{"year":2013,"deaths":22},{"year":2014,"deaths":26.2},{"year":2015,"deaths":24},{"year":2016,"deaths":24}]},{"name":"New York","values":[{"year":1999,"deaths":5.1},{"year":2000,"deaths":4},{"year":2001,"deaths":5.7},{"year":2002,"deaths":4.8},{"year":2003,"deaths":5},{"year":2004,"deaths":4.3},{"year":2005,"deaths":4.9},{"year":2006,"deaths":8.8},{"year":2007,"deaths":8.9},{"year":2008,"deaths":8.8},{"year":2009,"deaths":8.2},{"year":2010,"deaths":8},{"year":2011,"deaths":10},{"year":2012,"deaths":10.8},{"year":2013,"deaths":11.8},{"year":2014,"deaths":11.6},{"year":2015,"deaths":13.9},{"year":2016,"deaths":18.4}]},{"name":"North Carolina","values":[{"year":1999,"deaths":4.6},{"year":2000,"deaths":6.1},{"year":2001,"deaths":6.7},{"year":2002,"deaths":7.8},{"year":2003,"deaths":9},{"year":2004,"deaths":10},{"year":2005,"deaths":11.5},{"year":2006,"deaths":11.9},{"year":2007,"deaths":11.9},{"year":2008,"deaths":12.8},{"year":2009,"deaths":12.6},{"year":2010,"deaths":11.5},{"year":2011,"deaths":13.1},{"year":2012,"deaths":13.3},{"year":2013,"deaths":12.8},{"year":2014,"deaths":13.7},{"year":2015,"deaths":15.6},{"year":2016,"deaths":19.3}]},{"name":"North Dakota","values":[{"year":1999,"deaths":1.9},{"year":2000,"deaths":2.2},{"year":2001,"deaths":2.2},{"year":2002,"deaths":2.7},{"year":2003,"deaths":3.4},{"year":2004,"deaths":2.6},{"year":2005,"deaths":1.9},{"year":2006,"deaths":2.2},{"year":2007,"deaths":4.9},{"year":2008,"deaths":7},{"year":2009,"deaths":4.1},{"year":2010,"deaths":3.4},{"year":2011,"deaths":2.3},{"year":2012,"deaths":3},{"year":2013,"deaths":2.8},{"year":2014,"deaths":5.8},{"year":2015,"deaths":8.1},{"year":2016,"deaths":10.2}]},{"name":"Ohio","values":[{"year":1999,"deaths":4.1},{"year":2000,"deaths":5},{"year":2001,"deaths":6.5},{"year":2002,"deaths":8.2},{"year":2003,"deaths":6.8},{"year":2004,"deaths":9.9},{"year":2005,"deaths":10.8},{"year":2006,"deaths":13.2},{"year":2007,"deaths":13.8},{"year":2008,"deaths":15},{"year":2009,"deaths":10.7},{"year":2010,"deaths":15.9},{"year":2011,"deaths":17.5},{"year":2012,"deaths":18.4},{"year":2013,"deaths":20.3},{"year":2014,"deaths":23.7},{"year":2015,"deaths":28.5},{"year":2016,"deaths":37.3}]},{"name":"Oklahoma","values":[{"year":1999,"deaths":5.2},{"year":2000,"deaths":6.9},{"year":2001,"deaths":7.8},{"year":2002,"deaths":6.9},{"year":2003,"deaths":11.4},{"year":2004,"deaths":13.5},{"year":2005,"deaths":13.5},{"year":2006,"deaths":15.7},{"year":2007,"deaths":18.3},{"year":2008,"deaths":15.4},{"year":2009,"deaths":20.3},{"year":2010,"deaths":19.1},{"year":2011,"deaths":18.5},{"year":2012,"deaths":20.2},{"year":2013,"deaths":20.5},{"year":2014,"deaths":20},{"year":2015,"deaths":18.5},{"year":2016,"deaths":20.7}]},{"name":"Oregon","values":[{"year":1999,"deaths":6.2},{"year":2000,"deaths":6.1},{"year":2001,"deaths":6.9},{"year":2002,"deaths":9.1},{"year":2003,"deaths":10},{"year":2004,"deaths":10.2},{"year":2005,"deaths":10.7},{"year":2006,"deaths":13.2},{"year":2007,"deaths":13.5},{"year":2008,"deaths":12},{"year":2009,"deaths":13.2},{"year":2010,"deaths":13.1},{"year":2011,"deaths":13.7},{"year":2012,"deaths":12.6},{"year":2013,"deaths":11.6},{"year":2014,"deaths":13.1},{"year":2015,"deaths":12.5},{"year":2016,"deaths":12.4}]},{"name":"Pennsylvania","values":[{"year":1999,"deaths":8.1},{"year":2000,"deaths":9.3},{"year":2001,"deaths":7.8},{"year":2002,"deaths":8.9},{"year":2003,"deaths":11.2},{"year":2004,"deaths":12.4},{"year":2005,"deaths":13},{"year":2006,"deaths":13.1},{"year":2007,"deaths":13.8},{"year":2008,"deaths":14.7},{"year":2009,"deaths":15.1},{"year":2010,"deaths":15.1},{"year":2011,"deaths":18},{"year":2012,"deaths":18.5},{"year":2013,"deaths":19},{"year":2014,"deaths":21.4},{"year":2015,"deaths":25.5},{"year":2016,"deaths":36.2}]},{"name":"Rhode Island","values":[{"year":1999,"deaths":5.6},{"year":2000,"deaths":7.1},{"year":2001,"deaths":10.4},{"year":2002,"deaths":9.3},{"year":2003,"deaths":13.6},{"year":2004,"deaths":9.9},{"year":2005,"deaths":14.6},{"year":2006,"deaths":16.5},{"year":2007,"deaths":12.8},{"year":2008,"deaths":17.5},{"year":2009,"deaths":15.3},{"year":2010,"deaths":15.9},{"year":2011,"deaths":18.1},{"year":2012,"deaths":18.7},{"year":2013,"deaths":22.9},{"year":2014,"deaths":23.4},{"year":2015,"deaths":29.3},{"year":2016,"deaths":30.9}]},{"name":"South Carolina","values":[{"year":1999,"deaths":3.7},{"year":2000,"deaths":6.4},{"year":2001,"deaths":6},{"year":2002,"deaths":5.3},{"year":2003,"deaths":6.9},{"year":2004,"deaths":8.5},{"year":2005,"deaths":10},{"year":2006,"deaths":12.7},{"year":2007,"deaths":12.3},{"year":2008,"deaths":12.5},{"year":2009,"deaths":13.4},{"year":2010,"deaths":14.7},{"year":2011,"deaths":13.2},{"year":2012,"deaths":12.4},{"year":2013,"deaths":13},{"year":2014,"deaths":14.5},{"year":2015,"deaths":15.5},{"year":2016,"deaths":17.7}]},{"name":"South Dakota","values":[{"year":1999,"deaths":2.3},{"year":2000,"deaths":2.6},{"year":2001,"deaths":3.2},{"year":2002,"deaths":2.9},{"year":2003,"deaths":3.1},{"year":2004,"deaths":5.6},{"year":2005,"deaths":5.2},{"year":2006,"deaths":4.7},{"year":2007,"deaths":4},{"year":2008,"deaths":6.8},{"year":2009,"deaths":6.1},{"year":2010,"deaths":5.5},{"year":2011,"deaths":6.9},{"year":2012,"deaths":5},{"year":2013,"deaths":6.5},{"year":2014,"deaths":7.4},{"year":2015,"deaths":7.6},{"year":2016,"deaths":8}]},{"name":"Tennessee","values":[{"year":1999,"deaths":6.1},{"year":2000,"deaths":7},{"year":2001,"deaths":7.4},{"year":2002,"deaths":8.5},{"year":2003,"deaths":11.3},{"year":2004,"deaths":12.9},{"year":2005,"deaths":14.6},{"year":2006,"deaths":16},{"year":2007,"deaths":15.9},{"year":2008,"deaths":15},{"year":2009,"deaths":15.3},{"year":2010,"deaths":17},{"year":2011,"deaths":17},{"year":2012,"deaths":17.5},{"year":2013,"deaths":18.3},{"year":2014,"deaths":19.4},{"year":2015,"deaths":22.1},{"year":2016,"deaths":24.5}]},{"name":"Texas","values":[{"year":1999,"deaths":5.3},{"year":2000,"deaths":4.9},{"year":2001,"deaths":6.4},{"year":2002,"deaths":7.4},{"year":2003,"deaths":8},{"year":2004,"deaths":8.1},{"year":2005,"deaths":8.4},{"year":2006,"deaths":9.4},{"year":2007,"deaths":9.2},{"year":2008,"deaths":8.4},{"year":2009,"deaths":9.7},{"year":2010,"deaths":9.5},{"year":2011,"deaths":10.1},{"year":2012,"deaths":9.4},{"year":2013,"deaths":9.2},{"year":2014,"deaths":9.6},{"year":2015,"deaths":9.4},{"year":2016,"deaths":10.2}]},{"name":"Utah","values":[{"year":1999,"deaths":9.3},{"year":2000,"deaths":9.4},{"year":2001,"deaths":9.2},{"year":2002,"deaths":12.4},{"year":2003,"deaths":15},{"year":2004,"deaths":14.9},{"year":2005,"deaths":17.8},{"year":2006,"deaths":17.6},{"year":2007,"deaths":19.7},{"year":2008,"deaths":17.6},{"year":2009,"deaths":17.6},{"year":2010,"deaths":15.7},{"year":2011,"deaths":17.9},{"year":2012,"deaths":21},{"year":2013,"deaths":20.5},{"year":2014,"deaths":20.5},{"year":2015,"deaths":21.6},{"year":2016,"deaths":20.8}]},{"name":"Vermont","values":[{"year":1999,"deaths":4.8},{"year":2000,"deaths":5.9},{"year":2001,"deaths":7.2},{"year":2002,"deaths":7.6},{"year":2003,"deaths":10.5},{"year":2004,"deaths":8.1},{"year":2005,"deaths":8.5},{"year":2006,"deaths":12},{"year":2007,"deaths":10.6},{"year":2008,"deaths":11.7},{"year":2009,"deaths":8.8},{"year":2010,"deaths":10.1},{"year":2011,"deaths":13.2},{"year":2012,"deaths":11.2},{"year":2013,"deaths":14.8},{"year":2014,"deaths":13.2},{"year":2015,"deaths":15.8},{"year":2016,"deaths":20}]},{"name":"Virginia","values":[{"year":1999,"deaths":5.2},{"year":2000,"deaths":5.8},{"year":2001,"deaths":6.4},{"year":2002,"deaths":7},{"year":2003,"deaths":7.4},{"year":2004,"deaths":7.5},{"year":2005,"deaths":7.7},{"year":2006,"deaths":8.2},{"year":2007,"deaths":9},{"year":2008,"deaths":9.2},{"year":2009,"deaths":8.6},{"year":2010,"deaths":7},{"year":2011,"deaths":9.9},{"year":2012,"deaths":9},{"year":2013,"deaths":10.3},{"year":2014,"deaths":11.8},{"year":2015,"deaths":12.4},{"year":2016,"deaths":16.7}]},{"name":"Washington","values":[{"year":1999,"deaths":9.5},{"year":2000,"deaths":9.4},{"year":2001,"deaths":8.3},{"year":2002,"deaths":10.6},{"year":2003,"deaths":11.4},{"year":2004,"deaths":13.1},{"year":2005,"deaths":13.6},{"year":2006,"deaths":14.1},{"year":2007,"deaths":14.9},{"year":2008,"deaths":15.4},{"year":2009,"deaths":14.8},{"year":2010,"deaths":13.6},{"year":2011,"deaths":14.6},{"year":2012,"deaths":14.3},{"year":2013,"deaths":13.9},{"year":2014,"deaths":13.9},{"year":2015,"deaths":15.3},{"year":2016,"deaths":15.1}]},{"name":"West Virginia","values":[{"year":1999,"deaths":4.1},{"year":2000,"deaths":6.2},{"year":2001,"deaths":11.4},{"year":2002,"deaths":12.7},{"year":2003,"deaths":14.5},{"year":2004,"deaths":18.3},{"year":2005,"deaths":10.1},{"year":2006,"deaths":19.8},{"year":2007,"deaths":21.6},{"year":2008,"deaths":24.9},{"year":2009,"deaths":12.2},{"year":2010,"deaths":27.6},{"year":2011,"deaths":34.2},{"year":2012,"deaths":30.1},{"year":2013,"deaths":30.7},{"year":2014,"deaths":33.9},{"year":2015,"deaths":39.3},{"year":2016,"deaths":48.3}]},{"name":"Wisconsin","values":[{"year":1999,"deaths":4},{"year":2000,"deaths":4.6},{"year":2001,"deaths":5},{"year":2002,"deaths":6.2},{"year":2003,"deaths":7},{"year":2004,"deaths":7.9},{"year":2005,"deaths":9.3},{"year":2006,"deaths":10.6},{"year":2007,"deaths":11.1},{"year":2008,"deaths":10.7},{"year":2009,"deaths":11.1},{"year":2010,"deaths":11.1},{"year":2011,"deaths":12.2},{"year":2012,"deaths":12.1},{"year":2013,"deaths":14.9},{"year":2014,"deaths":14.8},{"year":2015,"deaths":15.2},{"year":2016,"deaths":18.6}]},{"name":"Wyoming","values":[{"year":1999,"deaths":4.1},{"year":2000,"deaths":4.5},{"year":2001,"deaths":4.4},{"year":2002,"deaths":6.8},{"year":2003,"deaths":6},{"year":2004,"deaths":9},{"year":2005,"deaths":5.1},{"year":2006,"deaths":10.5},{"year":2007,"deaths":11.8},{"year":2008,"deaths":13.6},{"year":2009,"deaths":10.7},{"year":2010,"deaths":15.1},{"year":2011,"deaths":15},{"year":2012,"deaths":17},{"year":2013,"deaths":16.8},{"year":2014,"deaths":18.7},{"year":2015,"deaths":16.4},{"year":2016,"deaths":16.9}]}];


var width = 1200;
var height = 700;
var margin = 140;
var duration = 250;

var lineOpacity = "0.25";
var lineOpacityHover = "0.85";
var otherLinesOpacityHover = "0.1";
var lineStroke = "1.5px";
var lineStrokeHover = "2.5px";

var circleOpacity = '0.85';
var circleOpacityOnLineHover = "0.25"
var circleRadius = 3;
var circleRadiusHover = 6;


/* Format Data */
var parseDate = d3.timeParse("%Y");
data.forEach(function(d) {
  d.values.forEach(function(d) {
    d.year = parseDate(d.year);
    d.deaths = +d.deaths;
  });
});

/* Scale */
var xScale = d3.scaleTime()
  .domain(d3.extent(data[0].values, d => d.year))
  .range([0, width-margin]);

var yScale = d3.scaleLinear()
  .domain([0, d3.max(data[0].values, d => d.deaths)])
  .domain([0, 50])
  .range([height-margin, 0]);

// var color = d3.scaleOrdinal(d3.schemeCategory10);

/* Add SVG */
var svg = d3.select("#chart1").append("svg")
  .attr("width", (width+margin)+"px")
  .attr("height", (height+margin)+"px")
  .append('g')
  .attr("transform", `translate(${margin}, ${margin})`);

/* Add line into SVG */
var line = d3.line()
  .x(d => xScale(d.year))
  .y(d => yScale(d.deaths))
  .curve(d3.curveMonotoneX);

let lines = svg.append('g')
  .attr('class', 'lines');


// TODO SET WV AS DEFAULT BEFORE MOUSE INTERACTION

lines.selectAll('.line-group')
  .data(data).enter()
  .append('g')
  .attr('class', function(d) {
    return 'line-group ' + d.name;
  })
  .on("mouseover", function(d, i) {
    // reset labels
    svg.select(".state-name-text").remove();
    svg.select(".percent-change-text").remove();
    svg.select(".start-years-text").remove();
    svg.select(".stop-years-text").remove();

    svg.append("text")
      .attr("class", "state-name-text")
      .text(d.name)
      .attr("text-anchor", "left")
      .attr("x", 150)
      .attr("y", 190);
    svg.append("text")
      .attr("class", "percent-change-text")
      .text("+" + (((d.values[17].deaths - d.values[0].deaths) / d.values[0].deaths)*100).toFixed(1) + "%")
      .attr("text-anchor", "left")
      .attr("x", 150)
      .attr("y", 213);
    svg.append("text")
      .attr("class", "stop-years-text")
      .text("2016: " + d.values[17].deaths)
      .attr("text-anchor", "left")
      .attr("x", 150)
      .attr("y", 231);
    svg.append("text")
      .attr("class", "start-years-text")
      .text("1999: " + d.values[0].deaths)
      .attr("text-anchor", "left")
      .attr("x", 150)
      .attr("y", 245);
  })
  .on("mouseout", function(d) {
    svg.select(".state-name-text").remove();
    svg.select(".percent-change-text").remove();
    svg.select(".start-years-text").remove();
    svg.select(".stop-years-text").remove();

    console.log(svg.select('.West')._groups["0"]["0"].__data__);
    let wv_data = svg.select('.West')._groups["0"]["0"].__data__;

    // WV DEFAULT
    svg.select(".West").append("text")
      .attr("class", "state-name-text")
      .text(wv_data.name)
      .attr("text-anchor", "left")
      .attr("x", 150)
      .attr("y", 190);
    svg.select(".West").append("text")
      .attr("class", "percent-change-text")
      .text("+" + (((wv_data.values[17].deaths - wv_data.values[0].deaths) / wv_data.values[0].deaths)*100).toFixed(1) + "%")
      .attr("text-anchor", "left")
      .attr("x", 150)
      .attr("y", 213);
    svg.select(".West").append("text")
      .attr("class", "stop-years-text")
      .text("2016: " + wv_data.values[17].deaths)
      .attr("text-anchor", "left")
      .attr("x", 150)
      .attr("y", 231);
    svg.select(".West").append("text")
      .attr("class", "start-years-text")
      .text("1999: " + wv_data.values[0].deaths)
      .attr("text-anchor", "left")
      .attr("x", 150)
      .attr("y", 245);
  })
  .append('path')
  .attr('class', 'line')
  .attr('d', d => line(d.values))
  .style('opacity', lineOpacity)
  .on("mouseover", function(d) {
    d3.selectAll('.line')
      .style('opacity', otherLinesOpacityHover);
    d3.selectAll('.circle')
      .style('opacity', circleOpacityOnLineHover);
    d3.select(this)
      .style('opacity', lineOpacityHover)
      .style("stroke-width", lineStrokeHover)
      .style("cursor", "pointer");
  })
  .on("mouseout", function(d) {
    // d3.selectAll(".line")
    //   .style('opacity', lineOpacity);
    // d3.selectAll('.circle')
    //   .style('opacity', circleOpacity);
    d3.select(this)
      .style("stroke-width", lineStroke)
      .style("cursor", "none");

    d3.selectAll('.line')
      .style('opacity', otherLinesOpacityHover);

    d3.select(".West").select(".line")
      .style('opacity', lineOpacityHover)
      .style("stroke-width", lineStrokeHover)
      .style("cursor", "pointer");
  });

let wv_data = svg.select('.West')._groups["0"]["0"].__data__;

// WV DEFAULT
svg.select(".West").append("text")
  .attr("class", "state-name-text")
  .text(wv_data.name)
  .attr("text-anchor", "left")
  .attr("x", 150)
  .attr("y", 190);
svg.select(".West").append("text")
  .attr("class", "percent-change-text")
  .text("+" + (((wv_data.values[17].deaths - wv_data.values[0].deaths) / wv_data.values[0].deaths)*100).toFixed(1) + "%")
  .attr("text-anchor", "left")
  .attr("x", 150)
  .attr("y", 213);
svg.select(".West").append("text")
  .attr("class", "stop-years-text")
  .text("2016: " + wv_data.values[17].deaths)
  .attr("text-anchor", "left")
  .attr("x", 150)
  .attr("y", 231);
svg.select(".West").append("text")
  .attr("class", "start-years-text")
  .text("1999: " + wv_data.values[0].deaths)
  .attr("text-anchor", "left")
  .attr("x", 150)
  .attr("y", 245);

d3.selectAll('.line')
  .style('opacity', otherLinesOpacityHover);
d3.select(".West").select(".line")
  .style('opacity', lineOpacityHover)
  .style("stroke-width", lineStrokeHover)
  .style("cursor", "pointer");

// circles
/*/!* Add circles in the line *!/
lines.selectAll("circle-group")
  .data(data).enter()
  .append("g")
  .style("fill", "#154254")
  .selectAll("circle")
  .data(d => d.values).enter()
  .append("g")
  .attr("class", "circle")
  .on("mouseover", function(d) {
    d3.select(this)
      .style("cursor", "pointer")
      .append("text")
      .attr("class", "text")
      .text(`${d.deaths}`)
      .attr("x", d => xScale(d.year) + 5)
      .attr("y", d => yScale(d.deaths) - 10);
  })
  .on("mouseout", function(d) {
    d3.select(this)
      .style("cursor", "none")
      .transition()
      .duration(duration)
      .selectAll(".text").remove();
  })
  .append("circle")
  .attr("cx", d => xScale(d.year))
  .attr("cy", d => yScale(d.deaths))
  .attr("r", circleRadius)
  .style('opacity', circleOpacity)
  .on("mouseover", function(d) {
    d3.select(this)
      .transition()
      .duration(duration)
      .attr("r", circleRadiusHover);
  })
  .on("mouseout", function(d) {
    d3.select(this)
      .transition()
      .duration(duration)
      .attr("r", circleRadius);
  });*/

/* Add Axis into SVG */
var xAxis = d3.axisBottom(xScale).ticks(5);
var yAxis = d3.axisLeft(yScale).ticks(5);

svg.append("g")
  .attr("class", "x axis")
  .attr("transform", `translate(0, ${height-margin})`)
  .call(xAxis);

svg.append("g")
  .attr("class", "y axis")
  .call(yAxis)
  .append('text')
  .attr("y", 15)
  .attr('transform', 'translate(-65,200)rotate(-90)')
  .text("Deaths per 100,000 population");